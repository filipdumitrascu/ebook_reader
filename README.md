# Ebook Reader (OpenBook Project)

## Contributor: Dumitrașcu Filip-Teodor 333CA

## 1. Diagrama bloc

![alt text](<Images/schema bloc.png>)

## 2. Bill Of Materials (BOM)

| Nume | Componenta | Link de achizitie | Datasheet |
|------|------------|-------------------|-----------|
| PFMF.050.1 | VARISTORCN1812 | [Component Search Engine](https://componentsearchengine.com/part-view/VE1812K401R050/KEMET) | [Datasheet](https://content.kemet.com/datasheets/KEM_V0003_VE.pdf) |
| Rezistente | RR0402 | [Component Search Engine](https://componentsearchengine.com/part-view/R0402%201%25%20100%20K%20(RC0402FR-07100KL)/YAGEO) | [Datasheet](https://content.kemet.com/datasheets/KEM_V0003_VE.pdf)
| J2 | SAMACSYS_PARTS_USB4110-GF-A | [Component Search Engine](https://componentsearchengine.com/part-view/USB4110-GF-A/GCT%20(GLOBAL%20CONNECTOR%20TECHNOLOGY)) | [Datasheet](https://gct.co/files/drawings/usb4110.pdf) |
| D1 | USBLC6-2SC6Y | [Snapeda](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/datasheet/) |
| Condensatoare | CC0402 | [Component Search Engine](https://componentsearchengine.com/part-view/CC0402MRX5R5BB106/YAGEO) | [Datasheet](https://componentsearchengine.com/Datasheets/2/CC0402MRX5R5BB106.pdf)|
| Q1 | WROVER_SPARKFUN-DISCRETESEMI_MOSFET_PCH-DMG2305UX-7 | [Component Search Engine](https://componentsearchengine.com/part-view/DMG2305UX-7/Diodes%20Incorporated) | [Datasheet](https://www.diodes.com//assets/Datasheets/DMG2305UX.pdf) |
| D2 | WROVER_AVX---SD0805S020S1R0_AVX_SD0805S020S1R0_0_0AVX_SD0805S020S1R0_0_0 | [Mouser](https://eu.mouser.com/ProductDetail/KYOCERA-AVX/SD0805S020S1R0?qs=jCA%252BPfw4LHbpkAoSnwrdjw%3D%3D) | [Datasheet](https://eu.mouser.com/datasheet/2/40/schottky-3165252.pdf) |
| C3 | RCL_CPOL-EUCT3528 | [Snapeda](https://eu.mouser.com/ProductDetail/KYOCERA-AVX/F910J107MBAAJ6?qs=PqoDHHvF649LraCA%2FjeGXg%3D%3D) | [Datasheet](https://s3.amazonaws.com/snapeda/datasheet/TAJB475K025RNJ_AVX.pdf) |
| J4 | 112A-TAAR-R03_ATTEND | [Snapeda](https://www.snapeda.com/parts/112A-TAAR-R03/Attend/view-part/) | [Datasheet](https://www.snapeda.com/parts/112A-TAAR-R03/Attend/datasheet/) |
| U2 | C6-WROOM-1-N8 | [Snapeda](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif+Systems/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif%20Systems/datasheet/) |
| MCP73831 | WROVER_SPARKFUN-IC-POWER_MCP73831 | [Mouser](https://eu.mouser.com/ProductDetail/Microchip-Technology/MCP73831T-2ACI-OT?qs=yUQqVecv4qvbBQBGbHx0Mw%3D%3D) | [Datasheet](https://eu.mouser.com/datasheet/2/268/MCP73831_Family_Data_Sheet_DS20001984H-3441711.pdf) |
| CHG_LED | ADAFRUIT_LEDCHIP-LED0603 | [Snapeda](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/view-part/?ref=search&t=LED%200603) | [Datasheet](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/datasheet/) |
| L1 | 744043680IND_4828-WE-TPC_WRE | [Mouser](https://eu.mouser.com/ProductDetail/Wurth-Elektronik/744043680?qs=PGXP4M47uW6VkZq%252BkzjrHA%3D%3D) | [Datasheet](https://www.we-online.com/components/products/datasheet/744043680.pdf) |
| D3 | MBR0530 | [Snapeda](https://www.snapeda.com/parts/MBR0530/Onsemi/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/MBR0530/ON%20Semiconductor/datasheet/) |
| Q3 | SI1308EDL-T1-GE3 | [Snapeda](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay+Siliconix/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay+Siliconix/view-part/?ref=eda) |
| SJ1 | SJ | [GrabCad](https://grabcad.com/library/solder-jumpers-1) | [Datasheet](https://www.we-online.com/components/products/datasheet/609002115121.pdf) |
| J1 | FH34SRJ-24S-0.5SH_99_ | [Component Search Engine](https://componentsearchengine.com/part-view/FH34SRJ-24S-0.5SH(99)/Hirose) | [Datasheet](https://www.hirose.com/en/product/document?clcode=CL0580-1255-6-99&productname=FH34SRJ-24S-0.5SH(99)&series=FH34SRJ&documenttype=2DDrawing&lang=en&documentid=0000990903) |
| Sensor2  | WROVER_BME680_BME680 | [Snapeda](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home) | [Datasheet](https://www.snapeda.com/parts/BME680/Bosch%20Sensortec/datasheet/) |
| Buttons | BUTTON_CUSYOMV1 | [Snapeda](https://www.snapeda.com/parts/EVQP7L01P/Panasonic/view-part/?ref=dk&t=evqp7l01p&con_ref=None) | [Datasheet](https://s3.amazonaws.com/snapeda/datasheet/EVQP7L01P_Panasonic.pdf) |
| U4 | MAX17048G+T10 | [Snapeda](https://www.snapeda.com/parts/MAX17048G+T10/Analog+Devices/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/MAX17048G+T10/Analog%20Devices/datasheet/) |
| U3 | DS3231SN# | [Snapeda](https://www.snapeda.com/parts/RV-3029-C3-TB-QA-OPT.B/Micro%20Crystal/view-part/?ref=micro%20crystal_rel&p=DS3231SN#&t=None) | [Datasheet](https://www.snapeda.com/parts/DS3231SN%23/Analog%20Devices/datasheet/) |
| C10_SUPERCAP | CPH3225A | [Snapeda](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/CPH3225A/Seiko%20Instruments/datasheet/) |
| J3 | QWIIC_CONNECTORJS-1MM | [Snapeda](https://www.snapeda.com/parts/PRT-14417/SparkFun%20Electronics/view-part/?ref=search&t=QWIIC_CONNECTORJS-1MM) | [Datasheet](https://www.snapeda.com/parts/PRT-14417/SparkFun%20Electronics/view-part/?ref=search&t=QWIIC_CONNECTORJS-1MM) |
| D6,8,9,10,11,12 | PGB1010603MR | [Snapeda](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse%20Inc./datasheet/) |
| U1 | W25Q512JVEIQ | [Snapeda](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond+Electronics/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond%20Electronics/datasheet/) |

## 3. Descrierea functionalitatii hardware

### 3.1 Componente si interfete
- **ESP32-C6** este creierul sistemului, responsabil pentru procesare și comunicatii.
- **Regulatorul LDO** asigura stabilizarea tensiunii pentru alimentarea componentelor.
- **Modulul de incărcare LiPo** gestioneaza incărcarea si protectia bateriei.
- **Ecranul E-Ink** ofera afisaj cu consum redus de energie.

### 3.2 Conexiuni si specificayii
- **ESP32-C6** comunica cu ecranul prin SPI.
- **Bateria LiPo** se conecteaza prin modulul de incarcare la ESP32-C6.
- **Planuri de masa** sunt distribuite pe top si bottom pentru reducerea zgomotului electromagnetic.

### 3.3 Optimizari si calcule de consum
- **Rute power** au fost trase cu latime de 0.3 mm pentru stabilitate.
- **Vias stitching** a fost implementat în jurul ESP32-C6 pentru un plan de masa eficient.
- **Erori ERC**: S-au acceptat 15 warning-uri conform specificațiilor arhitectului de sistem.

## 4. Pini utilizați pe ESP32-C6

| Pin ESP32-C6 | Functionalitate | Componenta conectata |
|-------------|---------------|--------------------|
| 3 | RESET | Buton/reset circuit |
| 8 | INT_RTC | Semnal intrerupere RTC | 
| 9 |32KHZ | Oscilator 32 kHz pentru RTC | 
| 27 | MISO	Linie | MISO SPI (Master In Slave Out) |
| 26 | EPD_BUSY | Semnal de stare pentru EPD (E-paper display) |
| 4 | SS_SD | Chip Select pentru card SD |
| 5 | EPD_DC | Pin Data/Command pentru EPD |
| 6 | SCK | Linie de ceas SPI |
| 7 | MOSI |Linie MOSI SPI (Master Out Slave In) |
| 15 | IO/BOOT | Buton pentru boot/flash | 
| 11 | IO10 | General-purpose I/O |
| 12 | IO11 | General-purpose I/O |
| 13 | IO12 | General-purpose I/O |
| 14 | IO13 | General-purpose I/O | 
| 23 | IO/CHANGE | Semnal de schimbare de stare |
| 25 | TX | Linie de transmisie UART |
| 24 | RX | Linie de recepție UART |
| 16 | RTC_RST | Reset RTC |
| 17 | I2C_PW | Alimentare pentru I2C |
| 18 | EPD_3V3_C | Alimentare 3.3V pentru EPD |
| 19 | SDA | Linie de date I2C |
| 20 | SCL | Linie de ceas I2C |
| 21 | EPD_RST | Reset pentru EPD |

## 5. Aspecte de design și probleme întâmpinate

- **Schematic**: Componentele au fost pozitionate conform specificatiilor arhitectului de sistem. (am pus inclusiv frame cu nume). Am acceptat 15 warninguri la verificarea erc
- **PCB 2D**: Am dat split sa obtin forma dorita in specificatii si am plasat componentele pe margini cu masurile primite pentru a ma asigura ca varianta 3d intra in carcasa si mufele sunt aliniate. Am pozitionat si componentele centrale ca in poza din specificatii. Am autorutat mai intai neturile power cu width de 0.3 mm fara trecere prin plan bottom si pe urma neturile neturile normale de 0.15 cu trecere prin plan bottom. Am pus via stitching langa modulul esp si planurile de masa atat pe top cat si pe bottom . Intradevar, sunt foarte multe viasuri puse. Poate o strategie mai buna ar fi fost sa rutez mai intai neturile normale ca sa nu fie spatiu ocupat si sa puna cat mai putine viasuri. Alta varianta ar fi fost sa rutez tot manual. (cam hardcore pentru primul proiect in fusion 360 cu acest dispozitiv un ebook reader destul de complex). Am modificat footprintul pentru piese in care intrau neturi de 0.3 mm fiind mai late decat suporta pinul piesei. In verificarea drc am 2 erori aprobate despre gauri in footprintul unei componente. (greseala a arhitectului de sistem)
- **PCB 3D**: Am downloadat step fielul si uploadat pentru fiecare componenta astfel incat sa aiba reprezentare in 3d. Test padurile sunt facute custom. Am plasat pcbul in carcasa primita de la arhitectul de sistem. Tin sa precizez ca dimensiunea de 15.30mm fata de coltul stanga sus (cu originea in coltul stanga jos) plaseaza sd cardu mai jos fata de gaura data in carcasa. Am ales sa mut gaura carcasei pentru a rezolva problema (decat sa schimb rute, replasez sd carsd si alte pushuri spre 3d)
- **Baterie, display**: Am facut o baterie si un ecram custom (am mai invatat fusion decat sa le iau step fileul de pe net) cu precizarea ca lipsesc firele de conexiune (cam mult pentru un prim proiect fusion). Dimensiuniile si componentele lor sunt luate din datasheeturile aferente.
- **Bom, PcP** Am generat de la manufacturing bom, pick and place si gerbers aferente pcbului. 
